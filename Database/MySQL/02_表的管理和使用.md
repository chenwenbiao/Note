# Table的管理和使用

```sql
--创建表,
-- not null 非空约束，此字段值不能为空,
-- unique 唯一约束，此字段值必须唯一，但可以为空
-- 对于字段的定义：
-- 字段名 数据类型 [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT 'string']
-- 如果表没有设定，则使用数据库字符集
-- 字符集: CHARSET = charset_name
-- 存储引擎: ENGINE = engine_name
-- The AUTO_INCREMENT attribute can be used to generate a unique identity for new rows.
-- 译: AUTO_INCREMENT属性可以用来为新的一行生成一个唯一的标识
-- 自增步长: AUTO_INCREMENT = 自增的步长
-- 数据文件目录: DATA DIRECTORY = '目录'
-- 索引文件目录: INDEX DIRECTORY = '目录'
-- 表注释: COMMENT = 'string'
-- 分区选项: PARTITION BY ... (详细见手册)
CREATE TABLE IF NOT EXISTS `student` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `name` varchar(20) NOT NULL,
    `gender` varchar(2) NOT NULL,
    `language` varchar(10) DEFAULT 'English',
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- 显示存储引擎的状态信息
SHOW ENGINES

-- 显示存储引擎的日志或状态信息
SHOW ENGINE 引擎名 {LOGS|STATUS} 

# 要查看一个表的结构：
DESC students;

# 查看创建表的SQL语句:
SHOW CREATE TABLE students;

# 删除表：
DROP TABLE IF EXISTS student;

-- 修改表 alter(改变，更改的意思)
ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段;

-- 给表添加列(字段),如果要给students表新增一列birth:
ALTER TABLE students ADD COLUMN birth VARCHAR(10) NOT NULL;

-- 修改表列名(字段名),要修改birth列，例如把列名改为birthday，类型改为VARCHAR(20)
ALTER TABLE students CHANGE COLUMN birth birthday VARCHAR(20) NOT NULL;

-- 修改表的某列的约束,注意新的列的类型以及约束要和老的列的类型兼容
ALTER TABLE students MODIFY COLUMN name varchar(100);

-- 修改表使用的数据库引擎
ALTER TABLE 表名 ENGINE=MYISAM;

-- 修改表名
ALTER TABLE students RENAME [TO]  student;
rename table old_table_name to new_table_name;

-- 可将表移动到另一个数据库
rename table old_table_name to new_database.new_table_name;

--删除列
ALTER TABLE students DROP COLUMN birthday;

-- 删除主键：
-- 删除主键之前一定要删除当前主键的外键约束
alter table stu drop primary key;

-- 清空表中的所有数据: 
-- truncate不能加where条件，而delete可以加where条件,
-- truncate删除不能回滚，delete删除可以回滚
delete from <tablename>
truncate table 表名
```

## Table的操作 

```mysql
-- 修改表的字段结构
    ALTER TABLE 表名 操作名
    -- 操作名
        ADD[ COLUMN] 字段定义       -- 增加字段
            AFTER 字段名          -- 表示增加在该字段名后面
            FIRST               -- 表示增加在第一个
        ADD PRIMARY KEY(字段名)   -- 创建主键
        ADD UNIQUE [索引名] (字段名)-- 创建唯一索引
        ADD INDEX [索引名] (字段名) -- 创建普通索引
        DROP[ COLUMN] 字段名      -- 删除字段
        MODIFY[ COLUMN] 字段名 字段属性     -- 支持对字段属性进行修改，不能修改字段名(所有原有属性也需写上)
        CHANGE[ COLUMN] 原字段名 新字段名 字段属性      -- 支持对字段名修改
        DROP PRIMARY KEY    -- 删除主键(删除主键前需删除其AUTO_INCREMENT属性)
        DROP INDEX 索引名 -- 删除索引
        DROP FOREIGN KEY 外键    -- 删除外键
        
-- 删除表
    DROP TABLE[ IF EXISTS] 表名 ...
-- 清空表数据
    TRUNCATE [TABLE] 表名
-- 复制表结构
    CREATE TABLE 表名 LIKE 要复制的表名
-- 复制表结构和数据
    CREATE TABLE 表名 [AS] SELECT * FROM 要复制的表名
-- 检查表是否有错误
    CHECK TABLE tbl_name [, tbl_name] ... [option] ...
-- 优化表
    OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...
-- 修复表
    REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]
-- 分析表
    ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...
```
