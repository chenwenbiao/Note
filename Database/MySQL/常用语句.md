#### 一, Commonly used statements

##### 1, database backup and restore
```shell
mysqldump -u root -p1 test > d:\test.sql
mysql>source d:\test.sql
```

```shell
mysql -u root –p
mysql -u root -p < schema.sql
show create database db;
CREATE DATABASE <dbname> if not exists CHARACTER SET utf8;(要设置编码，防止创建列出错)
drop database if exists db;
show create table t;
desc tableName;
rename table t to t1;
drop table t3;
alter table small change column STBMAC id text;

ALTER TABLE table_name ADD column_name datatype;
alter table t add age int;
alter table t drop id;
alter table t modify age tinyint;

alter table t change column name username varchar(30);
删除主键：alter table stu drop primary key;
```

* 删除主键之前一定要删除当前主键的外键约束
* not null 非空约束，此字段值不能为空
* unique 唯一约束，此字段值必须唯一，但可以为空

#### 二, Character set

修改已经存在的数据库的字符集为gbk：

```shell
alter database db character set gbk;
```

查看Mysql的支持的字符集:
show character set

查看数据库中所有的校对规则
show collation;

Collation校对规则：负责决定某一字符集下的字符进行比较和排序的结果。

创建一个数据库db2,字符集用gbk，校对规则用gbk_bin
create database db1 character set gbk collate gbk_bin;

查看中文校对规则
show collation like '%gb%';

设置客户端的字符集为gbk
set character_set_client = gbk;

设置结果集的字符集为gbk
set character_set_results = gbk;

show variables like 'validate_password%';

set global validate_password_length = 6;

Enter the following if the database user already exists.:

GRANT SELECT ON database.* TO user@'localhost';

To enable more options, you would separate them with a comma. So to enable SELECT, INSERT, and DELETE your syntax would look like this:

GRANT SELECT, INSERT, DELETE ON database TO username@'localhost' IDENTIFIED BY 'password';

#### 三，多表查询

##### 1，交叉查询

```shell
select * from stu cross join score;
select * from stu,score;
```

##### 2, 内连接

* 显式内连接

```shell
select * from stu s inner join score c on s.id = c.id;
```

* 隐式内连接

```shell
select * from stu s ,score c where s.id = c.id;
```

##### 3, 外连接

* 左外连接（left out join）

* 右外连接（right outer join）

> 与内连接不同的是，外连接不仅返回连接表中符合连接条件及查询条件的数据行，也返回左
表（左外连接时）或右表（右外连接时）中仅符合查询条件但不符合连接条件的数据行

```shell
select * from stu s left outer join score c on s.id = c.sid;
```

##### 4, 子查询

```shell
select * from stu where id not in(select sid from score);
```

##### 5, 联合查询

```shell
select * from stu where id = 1 union select * from stu where address = '桃花岛';
```

##### 6, 报表查询

```shell
select count(*) 人数, sex from stu group by sex having  count(*) > 2;
```

#### 四, 合计函数（聚合函数）

返回某一列，行的总数:
```shell
select count(id) from stu;
```

sum(english)：统计英语总分，返回满足where条件的行的和
```shell
select sum(chinese) 语文总分 form score;
```

avg(english):返回满足where条件的一列的平均值
```shell
select avg(chinese) from score;
```

Max/min函数返回满足where条件的一列的最大/最小值
```shell
select max(chinese) from score; select min(chinese) from score;
```