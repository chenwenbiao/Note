Redis是一个开源的高性能键值对数据库。它通过提供多种键值数据类型来适应不同场景下的存储需求.

## 特性

### 存储结构

Redis是REmote DIctionary Server（远程字典服务器）的缩写，它以字典(或称映射)结构存储数据，并允许其他应用通过`TCP协议读写字典中的内容`。Redis字典中的键值除了可以是字符串，还可以是其他数据类型。到目前为止Redis支持的键值数据类型如下：

1.字符串类型
2. 散列类型
3. 列表类型
3. 集合类型
4. 有序集合类型

这种字典形式的存储结构与常见的MySQL等关系数据库的二维表形式的存储结构有很大的差异。举个例子，如下所示，我们在程序中使用post变量存储了一篇文章的数据(包括标题、正文、阅读量和标签):

post["title"]="Hello World!"
post["content"]="Blablabla..."
post["views"]=0
post["tags"]=["PHP","Ruby","Node.js"]

### 内存存储与持久化

Redis数据库中的所有数据都存储在内存中。由于内存的读写速度远快于硬盘，因此Redis在性能上对比其他基于硬盘存储的数据库有非常明显的优势，在一台普通的笔记本电脑上，Redis可以在一秒内读写超过十万个键值。

>将数据存储在内存中也有问题，例如，程序退出后内存中的数据会丢失。不过 Redis提供了对持久化的支持，即可以将内存中的数据异步写入到硬盘中，同时不影响继续提供服务。

### 功能丰富

Redis虽然是作为数据库开发的，但由于其提供了丰富的功能，越来越多的人将其用作`缓存、队列系统`等。Redis可谓是名副其实的多面手。

Redis可以为每个键设置`生存时间（Time To Live，TTL）`，生存时间到期后键会自动被删除。这一功能配合出色的性能让Redis可以作为缓存系统来使用，而且由于Redis支持`持久化`和丰富的数据类型，使其成为了`另一个非常流行的缓存系统Memcached的有力竞争者`。

#### Redis与Memcached

讨论关于Redis和Memcached优劣的讨论一直是一个热门的话题。`在性能上Redis是单线程模型，而Memcached支持多线程，所以在多核服务器上后者的性能更高一些`。然而，前面已经介绍过，Redis的性能已经足够优异，在绝大部分场合下其性能都不会成为瓶颈。所以在使用时更应该关心的是二者在功能上的区别，`如果需要用到高级的数据类型或是持久化等功能，Redis将会是Memcached很好的替代品`。

作为缓存系统，Redis还可以限定数据占用的最大内存空间，在数据达到空间限制后可以按照一定的规则自动淘汰不需要的键。

>除此之外，Redis的列表类型键可以用来实现队列，并且支持阻塞式读取，可以很容易地实现一个高性能的优先级队列。同时在更高层面上，Redis还支持“发布/订阅”的消息模式，可以基于此构建聊天室等系统。

### 简单稳定

Redis直观的存储结构使得通过程序与Redis交互十分简单。在Redis中`使用命令来读写数据`，`命令语句之于Redis`就相当于`SQL语言之于关系数据库`。例如在关系数据库中要获取posts表内id为1的记录的title字段的值可以使用如下SQL语句实现：

>LSELECT title FROM posts WHERE id=1 LIMIT 1

相对应的，在Redis中要读取键名为post:1的散列类型键的title字段的值，可以使用如下命令语句实现：

>HGET post:1 title

其中HGET就是一个命令。Redis提供了一百多个命令，听起来很多，但是常用的却只有十几个，并且每个命令都很容易记忆。读完第3章你就会发现Redis的命令比SQL语言要简单很多。

Redis提供了几十种不同编程语言的客户端库，这些库都很好地封装了Redis的命令，使得在程序中与Redis进行交互变得更容易。

>读者可以在http://redis.io/commands上查看到所有的redis命令和使用方法

Redis使用C语言开发，代码量只有3万多行。这降低了用户通过修改Redis源代码来使之更适合自己项目需要的门槛。对于希望“榨干”数据库性能的开发者而言，这无疑是一个很大的吸引力。

## 安装Redis

Redis的版本规则:Redis约定次版本号（即第一个小数点后的数字）为偶数的版本是稳定版（如2.4版、2.6版），奇数版本是非稳定版（如2.5版、2.7版），推荐使用稳定版本进行开发和在生产环境使用。

>Redis兼容大部分POSIX系统，在这些系统中推荐直接下载Redis源代码编译安装以获得最新的稳定版本。Redis最新稳定版本的源代码可以从地址http://download.redis.io/redis-stable.tar.gz下载。

下载安装包后解压即可使用make 命令完成编译，完整的命令如下：

```shell
wget http://download.redis.io/redis-stable.tar.gz
tar xzf redis-stable.tar.gz
cd redis-stable
make
make install
```

