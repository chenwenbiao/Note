# 缓存

## 为什么需要缓存

现在互联网应用的整体流程，如下图所示，用户请求从界面（浏览器或App界面）到Nginx网络转发、再到应用服务再到数据库，然后返回到界面呈现内容。

往往我们的应用服务器资源是有限的，数据库每秒能接受的请求次数也是有限的，所以引入缓存,减少数据库磁盘IO.有效提升响应速度,

![](互联网应用一般流程.png)

# 缓存特点 

## 命中率:

当某个请求能够通过访问缓存而得到响应时，称为缓存命中。缓存命中率越高，缓存的利用率也就越高。

## 最大空间

* 缓存通常位于内存中，内存的空间通常比磁盘空间小的多，因此缓存的最大空间不可能非常大。
* 当缓存存放的数据量超过最大空间时，那么将会触发缓存启动清空策略,就需要淘汰部分数据来存放新到达的数据。
* 根据不同的场景合理的设置最大元素值往往可以一定程度上提高缓存的命中率，从而更有效的时候缓存。

## 虽然从硬件介质上来看，无非就是内存和硬盘两种，但从技术上，可以分成内存、硬盘文件、数据库(非关系数据库)。

* 内存：将缓存存储于内存中是最快的选择，`无需额外的I/O开销`，但是内存的缺点是没有持久化落地物理磁盘，一旦应用异常break down而重新启动，数据很难或者无法复原。
* 硬盘：一般来说，很多缓存框架会结合使用内存和硬盘，在内存分配空间满了或是在异常的情况下，可以被动或主动的将内存空间数据持久化到硬盘中，达到释放空间或备份数据的目的。
* 数据库：前面有提到，增加缓存的策略的目的之一就是`为了减少数据库的I/O压力`。现在使用数据库做缓存介质是不是又回到了老问题上了？其实，数据库也有很多种类型，像那些不支持SQL，只是简单的key-value存储结构的特殊数据库（如BerkeleyDB和Redis），响应速度和吞吐量都远远高于我们常用的关系型数据库等。
