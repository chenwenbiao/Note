## Java Heap Space(Java堆内存,堆空间)

现代的垃圾收集器基本都是采用分代收集算法

堆不需要连续内存，并且可以动态增加其内存，增加失败会抛出 OutOfMemoryError 异常。

当stack内存满的时候，Java运行时抛出java.lang.StackOverFlowError ，然而当heap memory慢的时候，会抛出java.lang.OutOfMemoryError，java heap space error.

当JVM无法分配内存来创建对象时，抛出java.lang.OutOfMemoryError。Java OutOfMemoryError是一个错误，发生在运行时。

在这种情况下，垃圾收集器不可以回收更多空间去满足程序需要，因此错误发生，因此java运行时抛出此异常。

JVM可以使用超过Xmx的(堆内存)更大内存空间.因为Xmx和Xms只是针对堆内存.

## 修改运行class文件的heap space：

你可以使用g或者G表示GB，m或M表示MB，k或K表示KB，例如分配最大1GB堆内存的表示方法:

```java
java -Xmx1073741824 com.mycompany.MyClass
java -Xmx1048576k com.mycompany.MyClass
java -Xmx1024m com.mycompany.MyClass
java -Xmx1g com.mycompany.MyClass
```

可以同时指定初始堆内存大小和最大堆内存大小: `java -Xms256m -Xmx2048m`

(将-Xms和-Xmx设置为一样，就可以禁止自动扩展堆内存)

Xms没有默认值，Xmx通常的默认值是256MB,当遇到OutOfMemoryError的时候会修改Xms和Xmx.

可以用-Xms 和-Xmx JVM选项去定义`堆内存`的初始大小和最大大小，我们可以用-Xss去定义stack内存的大小.