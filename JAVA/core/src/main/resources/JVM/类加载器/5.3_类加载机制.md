# 类加载机制

    类是在运行期间第一次使用时动态加载的，而不是一次性加载所有类。因为如果一次性加载，那么会占用很多的内存

![](../pics/类加载器.png)

    JVM把class文件加载到内存，并对数据进行校验、转换解析和初始化，这就是JVM的类加载机制。

# 类的生命周期

一个类从被加载到内存到卸载出内存，整个生命周期包括7 个阶段：

-  **加载（Loading）** :把类的字节码加载到内存
-  **验证（Verification）** :验证字节码是否符合jvm的要求.
-  **准备（Preparation）** : 赋 数据类型的 零值
-  **解析（Resolution）** 
-  **初始化（Initialization）** :初始化阶段才真正开始执行用户类中定义的 Java 代码。初始化过程是一个执行`类构造器<clinit>()方法的过程`。根据程序员主观意愿来初始化变量
- 使用（Using）
- 卸载（Unloading）

加载、验证、准备、初始化和卸载，这五个阶段的顺序是确定的，而解析不一定。某些情况下，解析可能在初始化之后再开始，这就是java动态绑定

# 必须对类立即进行初始化的5种情况

    遇到new、getstatic、putstatic或invokestatic这四个指令时，必须进行初始化,生成这几个指令的场景有：

- 使用new实例化一个对象时；
- 读取或者设置一个类的静态字段时；
- 调用一个类的静态方法时
- 使用reflect包的方法对类进行反射时，也触发初始化。
- 初始化一个类的时候，若父类还未初始化，则首先进行父类的初始化

# 如何判断一个类是无用的类

![](../pics/如何判断一个类是无用的类.png)